{"ast":null,"code":"import _asyncToGenerator from\"C:/wamp64/www/smart-home/react-crud/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/wamp64/www/smart-home/react-crud/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\wamp64\\\\www\\\\smart-home\\\\react-crud\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect,useState}from'react';import axios from'axios';import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=function Home(){useEffect(function(){window.scrollTo(0,0);alluser();},[]);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),isuser=_useState2[0],setuser=_useState2[1];var alluser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(ids){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;axios.get(\"http://192.168.0.103/smart-home/Apicrud/users.php\").then(function(res){console.log(res.data.userlist.userdata);setuser(res.data.userlist.userdata);});_context.next=7;break;case 4:_context.prev=4;_context.t0=_context[\"catch\"](0);throw _context.t0;case 7:case\"end\":return _context.stop();}}},_callee,null,[[0,4]]);}));return function alluser(_x){return _ref.apply(this,arguments);};}();var deleteConfirm=function deleteConfirm(id){if(window.confirm(\"Are you sure?\")){deleteUser(id);}};var deleteUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;axios.post(\"http://192.168.0.103/smart-home/Apicrud/deleteusers.php\",{userids:id}).then(function(res){setuser([]);alluser();return;});_context2.next=7;break;case 4:_context2.prev=4;_context2.t0=_context2[\"catch\"](0);throw _context2.t0;case 7:case\"end\":return _context2.stop();}}},_callee2,null,[[0,4]]);}));return function deleteUser(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/insert\",className:\"btn\",children:\" Create User \"}),isuser.map(function(item,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"list\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Nome: \",item.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Senha: \",item.email]}),/*#__PURE__*/_jsx(Link,{to:\"edit/\".concat(item.user_id),className:\"btn default-btn\",children:\" Edit \"}),/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){return deleteConfirm(item.user_id);},className:\"btn default-btn\",children:\" Delete \"})]},item.user_id);})]});};export default Home;","map":{"version":3,"sources":["C:/wamp64/www/smart-home/react-crud/src/page/Home.js"],"names":["React","useEffect","useState","axios","Link","Home","window","scrollTo","alluser","isuser","setuser","ids","get","then","res","console","log","data","userlist","userdata","deleteConfirm","id","confirm","deleteUser","post","userids","map","item","index","name","email","user_id"],"mappings":"uXAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAAyBC,QAAzB,KAAwC,OAAxC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,IAAR,KAAoB,kBAApB,C,wFAEA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAM,CAEjBJ,SAAS,CAAE,UAAM,CACfK,MAAM,CAACC,QAAP,CAAgB,CAAhB,CAAmB,CAAnB,EACAC,OAAO,GACR,CAHQ,CAGN,EAHM,CAAT,CAKA,cAA0BN,QAAQ,CAAC,EAAD,CAAlC,wCAAOO,MAAP,eAAeC,OAAf,eACA,GAAMF,CAAAA,OAAO,0FAAG,iBAAOG,GAAP,kIAEZR,KAAK,CAACS,GAAN,sDACCC,IADD,CACM,SAAAC,GAAG,CAAI,CACXC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAJ,CAASC,QAAT,CAAkBC,QAA9B,EACAT,OAAO,CAACI,GAAG,CAACG,IAAJ,CAASC,QAAT,CAAkBC,QAAnB,CAAP,CACD,CAJD,EAFY,mKAAH,kBAAPX,CAAAA,OAAO,4CAAb,CAUA,GAAMY,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,EAAD,CAAQ,CAC5B,GAAIf,MAAM,CAACgB,OAAP,CAAe,eAAf,CAAJ,CAAqC,CACnCC,UAAU,CAACF,EAAD,CAAV,CACD,CACF,CAJD,CAKA,GAAME,CAAAA,UAAU,2FAAG,kBAAOF,EAAP,uIAEflB,KAAK,CAACqB,IAAN,2DAAsE,CACpEC,OAAO,CAAEJ,EAD2D,CAAtE,EAGCR,IAHD,CAGM,SAAAC,GAAG,CAAI,CACXJ,OAAO,CAAC,EAAD,CAAP,CACAF,OAAO,GACP,OACA,CAPF,EAFe,0KAAH,kBAAVe,CAAAA,UAAU,8CAAhB,CAaA,mBACE,oCACA,KAAC,IAAD,EAAM,EAAE,CAAC,SAAT,CAAmB,SAAS,CAAC,KAA7B,2BADA,CAECd,MAAM,CAACiB,GAAP,CAAW,SAACC,IAAD,CAAMC,KAAN,qBACZ,aAAK,SAAS,CAAC,MAAf,wBACE,8BAAUD,IAAI,CAACE,IAAf,GADF,cAEE,+BAAWF,IAAI,CAACG,KAAhB,GAFF,cAGE,KAAC,IAAD,EAAO,EAAE,gBAAUH,IAAI,CAACI,OAAf,CAAT,CAAmC,SAAS,CAAC,iBAA7C,oBAHF,cAIE,UAAG,OAAO,CAAE,yBAAMX,CAAAA,aAAa,CAACO,IAAI,CAACI,OAAN,CAAnB,EAAZ,CAA+C,SAAS,CAAC,iBAAzD,sBAJF,GAA2BJ,IAAI,CAACI,OAAhC,CADY,EAAX,CAFD,GADF,CAaD,CAjDD,CAmDA,cAAe1B,CAAAA,IAAf","sourcesContent":["import React, {useEffect,useState} from 'react'\r\nimport axios from 'axios';\r\nimport {Link } from \"react-router-dom\";\r\n\r\nconst Home = () => {\r\n\r\n  useEffect( () => {\r\n    window.scrollTo(0, 0);\r\n    alluser();\r\n  }, []); \r\n\r\n  const [isuser, setuser] = useState([]);\r\n  const alluser = async (ids) => {\r\n    try {\r\n      axios.get(`http://192.168.0.103/smart-home/Apicrud/users.php`)\r\n      .then(res => {\r\n        console.log(res.data.userlist.userdata)\r\n        setuser(res.data.userlist.userdata);\r\n      })\r\n    } catch (error) { throw error;}    \r\n  }\r\n\r\n  const deleteConfirm = (id) => {\r\n    if (window.confirm(\"Are you sure?\")) {\r\n      deleteUser(id);\r\n    }\r\n  };\r\n  const deleteUser = async (id) => {\r\n    try {\r\n      axios.post(`http://192.168.0.103/smart-home/Apicrud/deleteusers.php`, { \r\n        userids: id,\r\n      })\r\n      .then(res => {\r\n        setuser([]);\r\n        alluser();\r\n        return;\r\n       })\r\n    } catch (error) { throw error;}    \r\n  }\r\n\r\n  return (\r\n    <div>\r\n    <Link to=\"/insert\" className='btn'> Create User </Link>\r\n    {isuser.map((item,index)=>(\r\n    <div className=\"list\" key={item.user_id}>\r\n      <p>Nome: {item.name}</p>\r\n      <p>Senha: {item.email}</p>\r\n      <Link  to={`edit/${item.user_id}`} className=\"btn default-btn\"> Edit </Link>\r\n      <p onClick={() => deleteConfirm(item.user_id)} className=\"btn default-btn\"> Delete </p> \r\n    </div>\r\n  ))}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Home"]},"metadata":{},"sourceType":"module"}